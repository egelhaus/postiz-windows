<Page x:Class="PostizConfigurator.ProvidersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Social Media Providers">
    
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Left panel - Provider list -->
        <Border Grid.Column="0" 
               Background="#F8F9FA" 
               BorderBrush="#DEE2E6" 
               BorderThickness="1" 
               CornerRadius="5" 
               Margin="0,0,10,0">
            <StackPanel>
                <!-- Header -->
                <Border Background="#343A40" 
                       CornerRadius="5,5,0,0" 
                       Padding="15">
                    <StackPanel>
                        <TextBlock Text="Social Media Providers" 
                                  FontSize="16" 
                                  FontWeight="Bold" 
                                  Foreground="White"/>
                        <TextBlock Text="Select a provider to configure" 
                                  FontSize="11" 
                                  Foreground="#CED4DA"/>
                    </StackPanel>
                </Border>
                
                <!-- Provider list -->
                <ListBox Name="ProvidersListBox" 
                        Background="Transparent" 
                        BorderThickness="0" 
                        Margin="10"
                        SelectionChanged="ProvidersListBox_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="5">
                                <TextBlock Text="🔗" FontSize="14" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                <StackPanel>
                                    <TextBlock Text="{Binding DisplayName}" FontWeight="SemiBold" FontSize="12"/>
                                    <TextBlock FontSize="10" Foreground="#6C757D">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="Not configured"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ClientId, Converter={StaticResource StringEmptyToBoolConverter}}" Value="False">
                                                        <Setter Property="Text" Value="Configured"/>
                                                        <Setter Property="Foreground" Value="#28A745"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                
                <!-- Refresh button -->
                <Button Name="RefreshButton" 
                       Content="🔄 Refresh" 
                       Width="100" 
                       Height="30" 
                       Margin="10,5,10,5"
                       Click="RefreshButton_Click"
                       Style="{StaticResource SecondaryButtonStyle}"/>

                <!-- Update button -->
                <Button Name="UpdateButton" 
                       Content="📥 Update Postiz" 
                       Width="120" 
                       Height="30" 
                       Margin="10,5,10,10"
                       Click="UpdateButton_Click"
                       Style="{StaticResource PrimaryButtonStyle}"/>
            </StackPanel>
        </Border>
        
        <!-- Right panel - Provider details -->
        <Border Grid.Column="1" 
               Background="White" 
               BorderBrush="#DEE2E6" 
               BorderThickness="1" 
               CornerRadius="5" 
               Margin="10,0,0,0">
            <Grid>
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Name="ProviderDetailsPanel" 
                           Visibility="Collapsed" 
                           Margin="20">
                    
                    <!-- Header -->
                    <TextBlock Name="ProviderNameText" 
                              Text="" 
                              FontSize="20" 
                              FontWeight="Bold" 
                              Margin="0,0,0,20"
                              Foreground="#2C3E50"/>
                    
                    <!-- Instructions -->
                    <Border Background="#E7F3FF" 
                           BorderBrush="#B3D9FF" 
                           BorderThickness="1" 
                           CornerRadius="3" 
                           Padding="15" 
                           Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="ℹ️ Configuration Instructions" 
                                      FontWeight="SemiBold" 
                                      FontSize="12" 
                                      Margin="0,0,0,5"/>
                            <TextBlock Text="To configure this provider, you'll need to create an application in their developer portal and obtain the Client ID and Client Secret. After saving, the Postiz containers will be automatically redeployed with the new configuration." 
                                      FontSize="11" 
                                      TextWrapping="Wrap" 
                                      Foreground="#495057"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Form fields -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Client ID -->
                        <Label Grid.Row="0" Grid.Column="0" 
                              Content="Client ID:" 
                              VerticalAlignment="Center" 
                              FontWeight="SemiBold"/>
                        <TextBox Name="ClientIdTextBox" 
                                Grid.Row="0" Grid.Column="1" 
                                Height="30" 
                                Margin="0,5"
                                Padding="8,5"/>
                        
                        <!-- Client Secret -->
                        <Label Grid.Row="1" Grid.Column="0" 
                              Content="Client Secret:" 
                              VerticalAlignment="Center" 
                              FontWeight="SemiBold"/>
                        <PasswordBox Name="ClientSecretTextBox" 
                                    Grid.Row="1" Grid.Column="1" 
                                    Height="30" 
                                    Margin="0,5"
                                    Padding="8,5"/>
                        
                        <!-- Additional field (for some providers) -->
                        <StackPanel Name="AdditionalPanel" 
                                   Grid.Row="2" Grid.ColumnSpan="2" 
                                   Visibility="Collapsed" 
                                   Margin="0,10,0,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Label Name="AdditionalLabel" 
                                      Grid.Column="0"
                                      Content="Additional:" 
                                      VerticalAlignment="Center" 
                                      FontWeight="SemiBold"/>
                                <TextBox Name="AdditionalTextBox" 
                                        Grid.Column="1"
                                        Height="30" 
                                        Margin="0,5"
                                        Padding="8,5"/>
                            </Grid>
                        </StackPanel>
                        
                        <!-- Buttons -->
                        <StackPanel Grid.Row="3" Grid.ColumnSpan="2" 
                                   Orientation="Horizontal" 
                                   Margin="0,20,0,0">
                            <Button Name="SaveButton" 
                                   Content="Save &amp; Deploy" 
                                   Width="120" 
                                   Height="35" 
                                   Margin="0,0,10,0"
                                   Click="SaveButton_Click"
                                   Style="{StaticResource PrimaryButtonStyle}"/>
                            <Button Name="ClearButton" 
                                   Content="Clear" 
                                   Width="80" 
                                   Height="35"
                                   Click="ClearButton_Click"
                                   Style="{StaticResource SecondaryButtonStyle}"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Default message when no provider is selected -->
            <StackPanel Name="NoSelectionPanel" 
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Center"
                       Margin="20">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ElementName=ProviderDetailsPanel, Path=Visibility}" Value="Visible">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>
                    
                    <TextBlock Text="🔗" 
                              FontSize="48" 
                              HorizontalAlignment="Center" 
                              Foreground="#CED4DA" 
                              Margin="0,0,0,10"/>
                    <TextBlock Text="Select a Social Media Provider" 
                              FontSize="16" 
                              FontWeight="SemiBold" 
                              HorizontalAlignment="Center" 
                              Foreground="#6C757D" 
                              Margin="0,0,0,5"/>
                    <TextBlock Text="Choose a provider from the list to configure its settings" 
                              FontSize="12" 
                              HorizontalAlignment="Center" 
                              Foreground="#ADB5BD"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Status bar at bottom -->
        <Border Grid.ColumnSpan="2" 
               Background="#F8F9FA" 
               BorderBrush="#DEE2E6" 
               BorderThickness="0,1,0,0" 
               Height="30" 
               VerticalAlignment="Bottom" 
               Margin="0,10,0,-20">
            <TextBlock Name="StatusText" 
                      Text="Ready" 
                      VerticalAlignment="Center" 
                      Margin="10,0" 
                      FontSize="11" 
                      Foreground="#6C757D"/>
        </Border>
    </Grid>
</Page>
